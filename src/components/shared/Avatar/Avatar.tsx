import { SyntheticEvent } from "react";

import { classNames } from "@shared/utils/classNames";

type AvatarProps = {
  imageUrl: string | null;
  size?: number;
};

function Avatar({ imageUrl, size = 50 }: AvatarProps) {
  const handleError = (e: SyntheticEvent<HTMLImageElement>) => {
    // 이미지 로딩 에러난 경우 svg 보여주도록
    e.currentTarget.style.display = "none";
    e.currentTarget.nextElementSibling?.classList.remove("hidden");
  };

  return (
    <div>
      {imageUrl && (
        <img
          className={"aspect-square rounded-full object-cover"}
          src={imageUrl}
          alt={"아바타 이미지"}
          width={size}
          onError={handleError}
        />
      )}
      <svg
        className={classNames(imageUrl && "hidden")}
        width={size}
        height={size}
        viewBox="0 0 50 50"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g clipPath="url(#clip0_7019_66397)">
          <rect width="50" height="50" rx="25" fill="#DEE1E3" />
          <path
            d="M14.042 10.2791C15.221 8.76063 17.3741 8.57043 18.8047 9.83572C19.4649 10.4367 19.9682 11.2117 20.2197 12.0974C20.707 13.7898 21.0526 15.5932 21.2256 17.4754C21.4614 20.0062 21.3674 22.4429 21.0059 24.7049C22.2792 24.4201 23.6157 24.2615 24.9834 24.2615C25.6749 24.2615 26.3507 24.2928 27.0107 24.3719C27.4823 22.6004 28.1742 20.8132 29.0859 19.0418C29.872 17.5233 30.7841 16.1312 31.7588 14.8816C32.2775 14.2332 32.9691 13.7589 33.7236 13.49C35.3586 12.9206 37.088 13.8221 37.5596 15.4988C37.7796 16.2738 37.7797 17.1121 37.5439 17.9187C37.0881 19.4372 36.4589 20.9872 35.6729 22.5056C34.9497 23.8817 34.1478 25.1469 33.2832 26.3015C39.041 29.3166 42.9822 35.3728 42.998 42.3465C38.4508 47.0639 32.0678 49.9998 24.998 49.9998C17.9293 49.9998 11.5472 47.0647 7 42.3484C7.01386 35.9431 10.3415 30.3127 15.3145 27.0926C14.1513 24.4828 13.3495 21.4775 13.0508 18.2351C12.8779 16.353 12.8779 14.5181 13.0508 12.7625C13.1451 11.8451 13.4918 10.9751 14.042 10.2791Z"
            fill="white"
          />
          <path
            d="M20.5 38C21.0523 38 21.5 37.5523 21.5 37C21.5 36.4477 21.0523 36 20.5 36C19.9477 36 19.5 36.4477 19.5 37C19.5 37.5523 19.9477 38 20.5 38Z"
            fill="#C1C8CC"
          />
          <path
            d="M29.5 38C30.0523 38 30.5 37.5523 30.5 37C30.5 36.4477 30.0523 36 29.5 36C28.9477 36 28.5 36.4477 28.5 37C28.5 37.5523 28.9477 38 29.5 38Z"
            fill="#C1C8CC"
          />
          <path
            d="M24.9988 38.5L25.4083 38.5097C25.8623 38.5193 26.1427 38.998 25.9246 39.3026L25.7332 39.5733C25.7332 39.5733 25.7288 39.5782 25.7243 39.583L25.6442 39.6845C25.3015 40.1052 24.6961 40.1052 24.3534 39.6845L24.2733 39.583C24.2733 39.583 24.2688 39.5782 24.2644 39.5733L24.073 39.3026C23.8593 38.998 24.1398 38.5193 24.5893 38.5097L24.9988 38.5Z"
            fill="#C1C8CC"
          />
          <path
            d="M17.0898 26C17.7269 25.6846 18.393 25.41 19.0706 25.1822C19.4471 23.7861 19.5919 22.203 19.4413 20.5323C19.3602 19.6327 19.1981 18.774 18.9664 17.9737C18.8448 17.5531 18.6073 17.1793 18.2888 16.8989C17.6111 16.2914 16.586 16.3907 16.0299 17.1092C15.7693 17.4421 15.6071 17.851 15.5608 18.2892C15.4797 19.1245 15.4797 19.9949 15.5608 20.8945C15.7404 22.828 16.2906 24.5863 17.0841 26H17.0898Z"
            fill="#DEE1E3"
          />
          <path
            d="M31.9818 25.5C32.5721 24.7742 33.1015 23.949 33.5518 23.0418C33.9291 22.275 34.2212 21.4966 34.4281 20.7298C34.5376 20.326 34.5194 19.9104 34.3916 19.53C34.1177 18.7106 33.1928 18.2891 32.3591 18.6052C31.9696 18.7515 31.6228 19.0032 31.3672 19.3368C30.8804 19.9748 30.4422 20.6889 30.0649 21.4556C29.5477 22.5033 29.2008 23.5685 29 24.5986C30.0345 24.8094 31.0325 25.1137 31.9818 25.5Z"
            fill="#DEE1E3"
          />
        </g>
        <defs>
          <clipPath id="clip0_7019_66397">
            <rect width="50" height="50" rx="25" fill="white" />
          </clipPath>
        </defs>
      </svg>
    </div>
  );
}

export { Avatar };
